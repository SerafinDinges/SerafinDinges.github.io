(this["webpackJsonpsometa.xyz"]=this["webpackJsonpsometa.xyz"]||[]).push([[0],{335:function(e,t,a){e.exports=a(746)},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},537:function(e,t){},539:function(e,t){},568:function(e,t){},569:function(e,t){},613:function(e,t){},615:function(e,t){},638:function(e,t){},745:function(e,t,a){},746:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(114),s=a.n(o),c=(a(340),a(29)),u=a(30),i=a(66),l=a(65),h=(a(341),function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"someta.xyz"))}}]),a}(r.a.Component)),d=(a(342),a(343),a(38)),p=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).colors=["#998AD3","#E494D3","#CDF1AF","#87DCC0","#88BBE4"],e}return Object(u.a)(a,[{key:"getDecoration",value:function(){return r.a.createElement(r.a.Fragment,null)}},{key:"buildGraph",value:function(){var e=this;if("LineChart"===this.props.type)return r.a.createElement(d.d,{data:this.props.dataWrapper.data},r.a.createElement(d.a,{strokeDasharray:"5 5",stroke:"#eee"}),r.a.createElement(d.g,{dataKey:this.props.dataWrapper.labels.xAxis}),r.a.createElement(d.h,null),r.a.createElement(d.f,null),r.a.createElement(d.b,null),this.props.dataWrapper.labels.dataKeys.map((function(t,a){return r.a.createElement(d.c,{type:"monotone",key:t,dataKey:t,stroke:e.colors[a]})})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Graph"},r.a.createElement("div",{className:"container"},r.a.createElement(d.e,{aspect:1.6},this.buildGraph())))}}]),a}(r.a.Component),f=a(31),m=a.n(f),v=a(69),y=a(306),b=a.n(y),g=a(728),k=function(){function e(){Object(c.a)(this,e),this.tabletop=void 0,this.worldData=void 0,this.tabletop=b.a.init({key:"1sAXPISlxdaxPIUAkua6Dxdd5DeWlUQ3fzx6Q9aGzfxY",simpleSheet:!1}),this.worldData=!1}return Object(u.a)(e,[{key:"getSheet",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tabletop.then((function(e,a){return e[t].elements})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCVD19CasesByCountry",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.worldData||(this.worldData=fetch("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv").then((function(e){return e.text()}))),e.abrupt("return",this.worldData.then((function(e){return g().fromString(e).then((function(e){e=e.filter((function(e){return e.total_cases>999}));var a={};e.forEach((function(e){if(t.includes(e.iso_code)){a[e.date]||(a[e.date]={date:e.date}),a[e.date][e.iso_code+"_cases"]=e.total_cases/1e3,a[e.date][e.iso_code+"_deaths"]=e.total_deaths/1;var n=new Date(e.date);a[e.date].prettyDate="".concat(n.getDay(),". ").concat(n.getMonth())}}));var n=[];return Object.keys(a).forEach((function(e){n.push(a[e])})),n}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=function(){function e(){Object(c.a)(this,e),this.API=void 0,this.API=new k}return Object(u.a)(e,[{key:"getCasesByCountry",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.getCVD19CasesByCountry(t);case 2:return a=e.sent,n={},a=a.sort((function(e,t){var a=new Date(e.date),n=new Date(t.date);return a.getTime()-n.getTime()})),n.data=a,r=[],t.forEach((function(e){r.push(e+"_deaths")})),n.labels={xAxis:"date",dataKeys:r},e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUKDeaths",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,this.API.getCVD19CasesByCountry(["GBR"]);case 3:return a=e.sent,e.next=6,this.API.getSheet("regular_flu_deaths");case 6:return n=e.sent,r={},n.forEach((function(e){var t=new Date(e.date);r[t.getDay()+"-"+t.getMonth()]=e})),o=a.map((function(e){var t=new Date(e.date),a=t.getMonth()+"-"+t.getDay();return r[a]&&(e.uk_total_deaths=r[a].uk_total_sum,e.uk_respiratory_deaths=r[a].uk_respiratory_sum),e})),console.log(o),t.data=o,t.labels={xAxis:"date",dataKeys:["GBRcases","GBRdeaths","uk_total_deaths","uk_respiratory_deaths"]},e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),w=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).countryOptions=[{selected:!1,value:"USA",label:"USA"},{selected:!1,value:"GBR",label:"United Kingdom"},{selected:!1,value:"DEU",label:"Germany"},{selected:!1,value:"JPN",label:"Japan"},{selected:!1,value:"AUT",label:"Austria"}],n.state={sheetData:[],ukDeaths:{data:[],labels:{dataKeys:[]}},customDeaths:{data:[],labels:{dataKeys:[]}},DataProvider:new D,compareCountries:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.DataProvider.getUKDeaths().then((function(t){e.setState({ukDeaths:t})}))}},{key:"processState",value:function(){var e=this;this.state.DataProvider.getCasesByCountry(this.state.compareCountries).then((function(t){console.log(t),e.setState({customDeaths:t})}))}},{key:"handleChange",value:function(e){var t=this,a=this.state.compareCountries;e.target.checked?a=a.concat([e.target.value]):a.indexOf(e.target.value)>-1&&a.splice(a.indexOf(e.target.value),1),this.setState({compareCountries:a},(function(){return t.processState()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main"},r.a.createElement("p",null,"Compare different countries with each other."),this.countryOptions.map((function(t){return r.a.createElement("label",{key:t.value},r.a.createElement("input",{onChange:e.handleChange.bind(e),type:"checkbox",value:t.value}),t.label)})),r.a.createElement(p,{dataWrapper:this.state.customDeaths,type:"LineChart"}),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo nisi inventore voluptates accusantium, quam beatae obcaecati ex ab quasi? Nobis earum nulla impedit hic quae, corporis eaque voluptate qui culpa."),r.a.createElement(p,{dataWrapper:this.state.ukDeaths,type:"LineChart"}))}}]),a}(r.a.Component);a(745);var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h,null),r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[335,1,2]]]);
//# sourceMappingURL=main.c2fec4b7.chunk.js.map