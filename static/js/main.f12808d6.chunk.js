(this["webpackJsonpsometa.xyz"]=this["webpackJsonpsometa.xyz"]||[]).push([[0],{330:function(e,t,a){e.exports=a(742)},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},533:function(e,t){},535:function(e,t){},564:function(e,t){},565:function(e,t){},609:function(e,t){},611:function(e,t){},634:function(e,t){},741:function(e,t,a){},742:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(114),s=a.n(o),i=(a(335),a(25)),c=a(26),l=a(50),u=a(49),h=(a(336),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"someta.xyz"),r.a.createElement("p",null,"A tool to investigate data relating but not exclusive to Covid-19."),r.a.createElement("p",null,r.a.createElement("i",null,"by ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://serafin.tv"},"Serafin Dinges"))))}}]),a}(r.a.Component)),d=(a(337),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("hr",null),r.a.createElement("strong",null,"Data sources:"),r.a.createElement("p",null,"Biggest data source is ",r.a.createElement("a",{rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv",target:"_blank"},"this raw csv sheet")," compiled by ",r.a.createElement("i",null,"Our World in Data"),". See full documentation in ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/owid/covid-19-data/tree/master/public/data"},"their repo"),". They in turn get their data from the ",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"},r.a.createElement("i",null,"European Centre for Disease Prevention and Control")),"."),r.a.createElement("p",null,"Peek at the source code: ",r.a.createElement("a",{href:"https://github.com/SerafinDinges/someta.xyz"},"https://github.com/SerafinDinges/someta.xyz")))}}]),a}(r.a.Component)),p=(a(338),a(339),a(41)),m=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).colors=[["#998AD3","#E494D3","#CDF1AF","#87DCC0","#88BBE4"],["#9E0C3C","#B01135","#CD1B2D","#E82322","#FB291B"],["#B478FF","#826DE8","#8592FF","#6D9AE8","#78CCFF"],["#5FFF63","#4AE87A","#7EE84A","#52FFB7","#C7FF52"],["#FF4DF2","#E83A85","#BF3AE8","#9E40FF","#7440FF"],["#FF8E59","#E89751","#FFC265","#E8BB51","#FFDE59"],["#FFEA56","#E8C443","#E8E543","#FFC54A","#CAFF4A"],["#E0BBE4","#957DAD","#D291BC","#FEC8D8","#FFDFD3"]],n.state={colorKey:{countries:{GBR:1,USA:2,DEU:3,AUT:4,ITA:5,JPN:6,KOR:7},dataSets:{}}},n}return Object(c.a)(a,[{key:"getColor",value:function(e){var t=this.state.colorKey.countries[e.substring(0,3)],a=this.state.colorKey.dataSets[e.substring(3)];return this.colors[t]&&this.colors[t][a]?this.colors[t][a]:this.colors[0][Math.floor(5*Math.random())]}},{key:"getToolTip",value:function(e,t){return[parseInt(e).toFixed(0),this.props.dataWrapper.metaData[t]]}},{key:"getLegend",value:function(e,t){return this.props.dataWrapper.metaData[e]}},{key:"buildGraph",value:function(){var e=this;if("LineChart"===this.props.type)return r.a.createElement(p.b,{data:this.props.dataWrapper.data},r.a.createElement(p.a,{strokeDasharray:"5 5",stroke:"#eee"}),r.a.createElement(p.g,{dataKey:this.props.dataWrapper.labels.xAxis}),r.a.createElement(p.h,null),r.a.createElement(p.f,{formatter:this.getToolTip.bind(this)}),r.a.createElement(p.c,{formatter:this.getLegend.bind(this)}),this.props.dataWrapper.labels.dataKeys.map((function(t){return r.a.createElement(p.d,{type:"monotone",key:t,dataKey:t,stroke:e.getColor(t)})})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Graph"},r.a.createElement("div",{className:"container"},r.a.createElement(p.e,{aspect:1.9},this.buildGraph())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={},n=0;return e.dataWrapper.labels.dataKeys.forEach((function(e){a[e.substring(3)]||(a[e.substring(3)]=n,n++)})),{colorKey:{countries:t.colorKey.countries,dataSets:a}}}}]),a}(r.a.Component),f=a(34),v=a.n(f),_=a(71),b=a(306),g=a.n(b),y=a(724),E=function(){function e(){Object(i.a)(this,e),this.tabletop=void 0,this.worldData=void 0,this.tabletop=g.a.init({key:"1sAXPISlxdaxPIUAkua6Dxdd5DeWlUQ3fzx6Q9aGzfxY",simpleSheet:!1}),this.worldData=!1}return Object(c.a)(e,[{key:"getSheet",value:function(){var e=Object(_.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tabletop.then((function(e,a){return e[t].elements})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCVD19CasesByCountry",value:function(){var e=Object(_.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.worldData||(this.worldData=fetch("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv").then((function(e){return e.text()}))),e.abrupt("return",this.worldData.then((function(e){return y().fromString(e).then((function(e){e=e.filter((function(e){return e.total_cases>999}));var a={};e.forEach((function(e){if(t.includes(e.iso_code)){a[e.date]||(a[e.date]={date:e.date}),a[e.date][e.iso_code+"_total_cases"]=e.total_cases/1e3,a[e.date][e.iso_code+"_total_deaths"]=e.total_deaths/1,a[e.date][e.iso_code+"_new_deaths"]=e.new_deaths/1,a[e.date][e.iso_code+"_new_cases"]=e.new_cases/1,a[e.date][e.iso_code+"_total_cases_per_million"]=(e.total_cases_per_million/1).toFixed(),a[e.date][e.iso_code+"_new_cases_per_million"]=(e.new_cases_per_million/1).toFixed(),a[e.date][e.iso_code+"_total_deaths_per_million"]=(e.total_deaths_per_million/1).toFixed(),a[e.date][e.iso_code+"_new_deaths_per_million"]=(e.new_deaths_per_million/1).toFixed();var n=new Date(e.date);a[e.date].prettyDate="".concat(n.getMonth()+1,"-").concat(n.getDate())}}));var n=[];return Object.keys(a).forEach((function(e){n.push(a[e])})),n}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D={countries:{DEU:"Germany",GBR:"United Kingdom",AUT:"Austria",USA:"USA",JPN:"Japan",ITA:"Italy",KOR:"South Korea"},dataSets:{total_deaths:"Total deaths",new_deaths:"New deaths",total_cases:"Total cases (in thousands)",new_cases:"New cases",total_cases_per_million:"Total cases (per million inhabitants)",new_cases_per_million:"New cases (per million inhabitants)",total_deaths_per_million:"Total deaths (per million inhabitants)",new_deaths_per_million:"New deaths (per million inhabitants)"}};var w=function(){function e(){Object(i.a)(this,e),this.API=void 0,this.API=new E}return Object(c.a)(e,[{key:"getMetaData",value:function(e){var t={};return e.forEach((function(e){t[e]=function(e){var t=e.substring(0,3),a=e.substring(4);return"".concat(D.countries[t],": ").concat(D.dataSets[a])}(e)})),t}},{key:"getCasesByCountryAndDataset",value:function(){var e=Object(_.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.API.getCVD19CasesByCountry(t);case 2:return n=e.sent,r={},n=n.sort((function(e,t){var a=new Date(e.date),n=new Date(t.date);return a.getTime()-n.getTime()})),r.data=n,r.labels={xAxis:"prettyDate"},r.labels.dataKeys=[],a.forEach((function(e){t.forEach((function(t){r.labels.dataKeys.push(t+"_"+e)}))})),r.labels.dataKeys.sort(),r.metaData=this.getMetaData(r.labels.dataKeys),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getUKDeaths",value:function(){var e=Object(_.a)(v.a.mark((function e(){var t,a,n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,this.API.getCVD19CasesByCountry(["GBR"]);case 3:return a=e.sent,e.next=6,this.API.getSheet("regular_flu_deaths");case 6:return n=e.sent,r={},n.forEach((function(e){var t=new Date(e.date);r[t.getDay()+"-"+t.getMonth()]=e})),o=a.map((function(e){var t=new Date(e.date),a=t.getMonth()+"-"+t.getDay();return r[a]&&(e.uk_total_deaths=r[a].uk_total_sum,e.uk_respiratory_deaths=r[a].uk_respiratory_sum),e})),console.log(o),t.data=o,t.labels={xAxis:"date",dataKeys:["GBRcases","GBRdeaths","uk_total_deaths","uk_respiratory_deaths"]},e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={sheetData:[],customDeaths:{data:[],labels:{dataKeys:[]}},DataProvider:new w,compareCountries:[],showDataSets:[]},n}return Object(c.a)(a,[{key:"processState",value:function(){var e=this;this.state.showDataSets.length>0&&this.state.compareCountries.length>0&&this.state.DataProvider.getCasesByCountryAndDataset(this.state.compareCountries,this.state.showDataSets).then((function(t){console.log(t),e.setState({customDeaths:t})}))}},{key:"handleChange",value:function(e){var t=this,a=this.state.compareCountries;e.target.checked?a=a.concat([e.target.value]):a.indexOf(e.target.value)>-1&&a.splice(a.indexOf(e.target.value),1),this.setState({compareCountries:a},(function(){return t.processState()}))}},{key:"handleChange2",value:function(e){var t=this,a=this.state.showDataSets;e.target.checked?a=a.concat([e.target.value]):a.indexOf(e.target.value)>-1&&a.splice(a.indexOf(e.target.value),1),this.setState({showDataSets:a},(function(){return t.processState()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main"},r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"Compare different countries with each other."),r.a.createElement("p",null,r.a.createElement("strong",null,"Choose countries"),Object.keys(D.countries).map((function(t){return r.a.createElement("label",{key:t},r.a.createElement("input",{onChange:e.handleChange.bind(e),type:"checkbox",value:t}),D.countries[t])}))),r.a.createElement("p",null,r.a.createElement("strong",null,"Choose data"),Object.keys(D.dataSets).map((function(t){return r.a.createElement("label",{key:t},r.a.createElement("input",{onChange:e.handleChange2.bind(e),type:"checkbox",value:t}),D.dataSets[t])})))),r.a.createElement(m,{dataWrapper:this.state.customDeaths,type:"LineChart"}))}}]),a}(r.a.Component);a(741);var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h,null),r.a.createElement(C,null),r.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[330,1,2]]]);
//# sourceMappingURL=main.f12808d6.chunk.js.map